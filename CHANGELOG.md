# 📋 更新日志

## v0.8.2 - 配置文件保护和NPM发布优化 (2024-12-20)

### 🛡️ 用户配置保护

#### 智能配置管理
- **修复** NPM包更新时可能覆盖用户配置文件的问题
- **新增** 智能配置初始化，仅在用户无配置文件时创建默认配置
- **移除** config/目录从NPM包files列表，避免意外覆盖
- **优化** postinstall脚本，增加配置文件安全检查

#### 用户体验改进
- **保护** 现有用户的config.yaml文件不被覆盖
- **创建** 默认配置文件到用户目录 `~/.remote-terminal-mcp/config.yaml`
- **静默处理** 配置初始化失败，不影响包安装
- **提供** 配置文件创建指引和文档链接

### 📦 NPM发布优化

#### 包内容精简
- **移除** 不必要的配置文件，减少包大小
- **保留** 核心功能文件和文档
- **优化** 文件包含列表，提高安装速度

---

## v0.8.1 - 自动化二级跳转和密码认证优化 (2024-12-20)

### 🔧 核心修复

#### 自动化二级跳转逻辑修复
- **修复** relay连接中的自动二级跳转功能
- **优化** SSH命令构建，确保用户名正确传递到目标服务器 
- **增强** 连接流程，实现真正的自动化多级跳转
- **改进** 配置传递逻辑，支持复杂的网络拓扑结构

#### 密码认证支持增强
- **新增** `password` 字段支持到 `ServerConfig` 数据类
- **实现** 自动密码认证流程，减少手动输入
- **优化** 密码验证逻辑，支持多种登录成功检测方式
- **增强** 配置加载，自动读取密码配置信息

#### 连接验证逻辑优化
- **简化** relay就绪检测，仅依据bash提示符快速判断
- **移除** 不必要的验证命令执行，提高连接效率
- **优化** 目标服务器连接验证，支持多种环境检测
- **改进** 错误处理，提供更准确的连接状态反馈

### 💡 技术改进

#### 配置管理优化
- **增强** `_connect_via_relay` 方法，支持自动化二级SSH连接
- **新增** `_verify_target_server_connection_with_password` 方法
- **优化** 配置传递，确保target配置包含用户名信息
- **改进** 错误信息，去除敏感提示信息

#### 连接流程改进
- **实现** 完整的script-based连接流程
- **支持** 自动化密码输入和验证
- **优化** 多级连接的状态检测
- **增强** 连接超时和重试逻辑

### 🎯 使用体验提升

#### 自动化程度提高
- **无需手动** 执行二级SSH连接命令
- **自动处理** 密码认证流程
- **智能检测** 连接状态和环境切换
- **简化操作** 一键完成复杂网络环境连接

#### 连接效率优化  
- **减少延迟** 移除不必要的验证步骤
- **快速判断** 基于提示符的状态检测
- **优化流程** 连接步骤更加精简高效

### 🔍 问题修复

#### 核心问题解决
- **修复** 二级跳转停留在第一级跳板机的问题
- **解决** SSH命令缺少用户名导致连接失败
- **修复** 配置传递不完整导致的自动化失效
- **解决** 连接验证逻辑过于复杂的效率问题

### 📚 代码质量提升

#### 敏感信息清理
- **移除** 特定厂商相关的提示信息
- **通用化** 错误检测逻辑，提高代码可移植性
- **标准化** 用户名检测，支持动态配置
- **优化** 日志输出，去除敏感服务器信息

---

## v0.8.0 - BOS集成和智能Shell配置 (2024-12-19)

### 🎆 重大新功能

#### ☁️ BOS(百度云存储)集成
- **新增** 完整的BOS配置管理系统
- **自动配置** BOS凭据和访问权限
- **一键下载** 云端配置文件到Docker容器
- **智能集成** 仅在选择zsh时显示BOS配置选项
- **错误处理** 完善的BOS连接和下载错误处理

#### 🐚 智能Shell配置系统
- **Shell选择** 支持bash/zsh选择，默认bash
- **环境预检测** 智能检测是否已在目标环境中
- **自动回退** 支持首选shell和备用shell的自动切换
- **配置同步** zsh环境自动下载和应用配置文件

#### 🐳 Docker环境增强
- **完整的Docker配置管理器** (`docker_config_manager.py`)
- **模板化配置** 支持开发、ML、Web等多种模板
- **GPU支持** 完整的CUDA环境配置
- **资源管理** 内存、共享内存、端口映射等
- **自动化初始化** 容器创建后自动执行初始化命令

### 🔧 技术改进

#### 配置管理优化
- **修复** 配置文件覆盖问题，现在正确合并配置
- **增强** 连接类型显示，正确区分SSH直连和Relay中继
- **改进** SSH错误检测，提供准确的错误信息和解决方案

#### 连接稳定性提升
- **智能重连** 避免不必要的重复连接
- **状态检测** 实时检测连接和环境状态
- **错误恢复** 自动处理常见连接问题

### 📚 文档和发布

#### 新增文档
- **BOS功能进展报告** (`BOS_PROGRESS.md`) - 详细记录BOS集成功能
- **更新README** 添加最新功能介绍和使用指南

#### NPM包发布优化
- **自动化发布脚本** (`scripts/publish.js`) - 完整的发布流程管理
- **版本管理** 支持patch/minor/major版本更新
- **质量检查** 发布前自动检查文件和运行测试
- **Git集成** 自动创建标签和推送到远程仓库

### 🎆 使用体验提升

#### 简化配置流程
```bash
# 新的Docker配置流程
python3 docker_config_manager.py
# 选择模板 -> 输入基本信息 -> 自动生成配置
```

#### 智能化连接
- **环境检测** 自动检测是否已在目标环境，避免重复连接
- **Shell适配** 根据配置自动选择合适的shell
- **配置同步** zsh环境自动下载和应用BOS配置文件

### 🔄 迁移指南

#### 现有用户
- ✅ **无需操作** - 现有配置自动兼容
- 🚀 **可选升级** - 使用新的Docker配置管理器
- ☁️ **BOS集成** - 为zsh环境添加BOS配置

#### 新用户
- 🎯 **推荐路径** - 使用 `python3 docker_config_manager.py` 创建Docker环境
- 📚 **学习资源** - 阅读BOS功能进展报告
- 💡 **最佳实践** - 遵循文档中的建议

---

## v2.0.0 - 智能化用户体验升级 (2024-12-19)

### 🚀 重大新功能

#### 交互式配置系统
- **新增** `config-helper.py` - 智能配置助手工具
- **新增** `interactive_config.py` - 完整的配置管理系统
- **支持** 多种服务器类型的快速配置向导
- **支持** 可视化配置管理界面（增删改查）
- **支持** 配置导入导出功能

#### 智能用户引导系统
- **新增** `enhanced_ssh_manager.py` - 增强版SSH管理器
- **新增** `InteractiveGuide` 类 - 智能交互引导
- **自动检测** 连接过程中的用户输入需求
- **智能等待** 用户输入完成并自动继续流程
- **支持** 密码、指纹确认、2FA等多种输入类型

### 🛠️ 功能增强

#### 配置管理
- **改进** 配置文件结构和位置管理
- **新增** 实时配置验证和格式检查
- **新增** 配置预览功能
- **新增** 一键连接测试

#### 调试和故障排除
- **新增** 智能故障诊断系统
- **改进** 错误信息和解决方案提示
- **新增** 配置助手调试命令
- **新增** 紧急恢复流程

#### 文档体系
- **新增** [交互式配置使用指南](./INTERACTIVE_CONFIG_GUIDE.md)
- **全面更新** README.md 使用文档
- **新增** 完整的使用流程和示例
- **改进** 故障排除指南

### 🎯 用户体验改进

#### 零学习成本
- **消除** 手动编写YAML配置的需求
- **提供** 智能配置向导
- **支持** 多种常见服务器类型模板

#### 智能化操作
- **自动化** 连接过程中的用户交互
- **智能化** 状态检测和流程控制
- **可视化** 配置管理和操作反馈

#### 可靠性提升
- **增强** 连接稳定性和错误处理
- **改进** 会话管理和状态监控
- **新增** 自动恢复机制

### 📦 技术改进

#### 代码结构
- **重构** SSH连接管理逻辑
- **新增** 模块化的配置管理系统
- **改进** 错误处理和日志记录

#### 兼容性
- **保持** 向后兼容现有配置
- **支持** 平滑升级路径
- **无需** 额外依赖安装

### 🔧 使用方法更新

#### 新的推荐工作流程
```bash
# 1. 交互式配置（首次使用）
python3 config-helper.py --quick

# 2. 在Cursor中使用
"连接到cpu-221"

# 3. 智能引导处理用户输入（自动）
```

#### 新的调试命令
```bash
# 配置管理
python3 config-helper.py --list
python3 config-helper.py --test server-name

# 故障排除
python3 config-helper.py
```

### 📚 文档更新

- **全面重写** README.md 使用文档
- **新增** 交互式配置详细指南
- **更新** 故障排除和调试方法
- **添加** 最佳实践建议

### 🔄 迁移指南

#### 现有用户
- ✅ **无需操作** - 现有配置自动兼容
- 🚀 **可选升级** - 使用新的交互式配置管理现有服务器
- 📖 **建议阅读** - 查看新功能使用指南

#### 新用户
- 🎯 **推荐路径** - 直接使用 `python3 config-helper.py --quick`
- 📖 **学习资源** - 阅读交互式配置使用指南
- 💡 **最佳实践** - 遵循文档中的建议

---

## v1.x - 基础功能版本

### 核心功能
- MCP协议集成
- 基础SSH连接管理
- tmux会话管理
- Docker容器支持
- 手动YAML配置

---

## 🔮 未来计划

### v2.1 计划功能
- **Web界面** - 浏览器端配置管理
- **批量操作** - 多服务器并行管理
- **监控面板** - 服务器状态实时监控
- **插件系统** - 支持自定义扩展

### v2.2 计划功能
- **AI助手集成** - 智能运维建议
- **自动化脚本** - 常用任务自动化
- **性能优化** - 连接速度和稳定性提升
- **移动端支持** - 移动设备管理功能

---

## 🤝 贡献

欢迎提交Issue和Pull Request来帮助改进项目！

### 贡献方向
- 🐛 Bug修复和问题报告
- ✨ 新功能建议和实现
- 📖 文档改进和翻译
- 🧪 测试用例和质量保证

## [0.7.0] - 2024-12-19

### 🚀 重大功能更新：MCP集成配置系统

#### ✨ 新增功能
- **对话式配置管理** - 用户现在可以通过Cursor对话直接配置服务器，无需手动编辑YAML文件
- **MCP集成工具** - 新增5个MCP工具支持完整的配置管理流程：
  - `interactive_config_wizard` - 交互式配置向导
  - `manage_server_config` - 服务器配置管理（增删改查）
  - `create_server_config` - 创建服务器配置
  - `diagnose_connection` - 连接诊断
- **智能配置模板** - 为SSH、Relay、Docker等不同类型服务器提供配置模板
- **实时连接测试** - 配置完成后立即验证连接可用性
- **配置导入导出** - 支持配置文件的备份和迁移

#### 🔧 技术改进
- 新增 `MCPConfigManager` 类，专门为MCP集成设计
- 完善的错误处理和用户友好的反馈信息
- 支持多种配置验证和诊断功能
- 兼容现有的SSH Manager和配置文件格式

#### 📚 文档更新
- 新增对话式配置示例和使用指南
- 更新README，突出MCP集成的优势
- 添加详细的功能演示和最佳实践

#### 🎯 用户体验提升
- **零学习成本** - 用户无需了解YAML语法或配置文件结构
- **智能引导** - 系统自动提供配置建议和模板
- **即时反馈** - 配置过程中实时验证和错误提示
- **可视化管理** - 通过对话界面管理所有服务器配置

### 📦 发布信息
- npm包自动包含所有新功能
- 向后兼容现有配置文件
- 支持从命令行工具平滑迁移到MCP集成模式

---

## [0.6.4] - 2024-12-18